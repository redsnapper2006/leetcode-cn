struct Solution {}

impl Solution {
  #[warn(dead_code)]
  pub fn dfs(num: i32, digits: &Vec<i32>, idx: usize, aggr: i32) {
    if idx == digits.len() {
      if aggr == num {
        println!("{}", aggr);
      }
      return;
    }

    let mut sum: i32 = 0;
    (idx..digits.len()).for_each(|i| {
      sum = sum * 10 + digits[i];
      if aggr + sum > num {
        return;
      }
      Solution::dfs(num, digits, i + 1, aggr + sum);
    });
  }
  #[warn(dead_code)]
  pub fn table() {
    (1..=1000).for_each(|num| {
      let mut digits: Vec<i32> = Vec::new();
      let mut nn = num * num;
      while nn > 0 {
        digits.push(nn % 10);
        nn /= 10;
      }
      digits.reverse();
      // println!("go to {} {:?}", num, digits);
      Self::dfs(num, &digits, 0, 0);
    });
  }
  #[warn(dead_code)]
  pub fn create_table() {
    let mut buf: Vec<i32> = vec![0; 1001];
    buf[1] = 1 * 1;
    buf[9] = 9 * 9;
    buf[10] = 10 * 10;
    buf[36] = 36 * 36;
    buf[45] = 45 * 45;
    buf[55] = 55 * 55;
    buf[82] = 82 * 82;
    buf[91] = 91 * 91;
    buf[99] = 99 * 99;
    buf[100] = 100 * 100;
    buf[235] = 235 * 235;
    buf[297] = 297 * 297;
    buf[369] = 369 * 369;
    buf[370] = 370 * 370;
    buf[379] = 379 * 379;
    buf[414] = 414 * 414;
    buf[657] = 657 * 657;
    buf[675] = 675 * 675;
    buf[703] = 703 * 703;
    buf[756] = 756 * 756;
    buf[792] = 792 * 792;
    buf[909] = 909 * 909;
    buf[918] = 918 * 918;
    buf[945] = 945 * 945;
    buf[964] = 964 * 964;
    buf[990] = 990 * 990;
    buf[991] = 991 * 991;
    buf[999] = 999 * 999;
    buf[1000] = 1000 * 1000;
    (1..=1000).for_each(|v| {
      buf[v] += buf[v - 1];
    });
    println!("{:?}", buf);
  }

  pub fn punishment_number(n: i32) -> i32 {
    // Self::table();
    let buf: Vec<i32> = vec![
      0, 1, 1, 1, 1, 1, 1, 1, 1, 82, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182,
      182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 182, 1478, 1478, 1478, 1478,
      1478, 1478, 1478, 1478, 1478, 3503, 3503, 3503, 3503, 3503, 3503, 3503, 3503, 3503, 3503,
      6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528,
      6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 6528, 13252, 13252, 13252,
      13252, 13252, 13252, 13252, 13252, 13252, 21533, 21533, 21533, 21533, 21533, 21533, 21533,
      21533, 31334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334,
      41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334,
      41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334,
      41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334,
      41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334,
      41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334,
      41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334,
      41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334,
      41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334,
      41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334, 41334,
      41334, 41334, 41334, 41334, 41334, 41334, 41334, 96559, 96559, 96559, 96559, 96559, 96559,
      96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559,
      96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559,
      96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559,
      96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559, 96559,
      96559, 96559, 96559, 96559, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768,
      184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768,
      184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768,
      184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768,
      184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768,
      184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768,
      184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 184768, 320929, 457829,
      457829, 457829, 457829, 457829, 457829, 457829, 457829, 457829, 601470, 601470, 601470,
      601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470,
      601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470,
      601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 601470, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866, 772866,
      1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515,
      1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1204515, 1660140, 1660140,
      1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140,
      1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 1660140,
      1660140, 1660140, 1660140, 1660140, 1660140, 1660140, 2154349, 2154349, 2154349, 2154349,
      2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349,
      2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349,
      2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349,
      2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349,
      2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2154349, 2725885,
      2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885,
      2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885,
      2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885, 2725885,
      2725885, 2725885, 2725885, 2725885, 2725885, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149, 3353149,
      3353149, 3353149, 4179430, 4179430, 4179430, 4179430, 4179430, 4179430, 4179430, 4179430,
      4179430, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154,
      5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154,
      5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5022154, 5915179, 5915179,
      5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179,
      5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 5915179, 6844475, 6844475, 6844475,
      6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475,
      6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475, 6844475,
      6844475, 6844475, 6844475, 7824575, 8806656, 8806656, 8806656, 8806656, 8806656, 8806656,
      8806656, 8806656, 9804657, 10804657,
    ];

    buf[n as usize]
  }
}

fn main() {
  println!("{}", Solution::punishment_number(1));
  println!("{}", Solution::punishment_number(37));
}
